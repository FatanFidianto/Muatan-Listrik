<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perhitungan Muatan Listrik</title>
  <link rel="stylesheet" href="/Muatan-Listrik/styles.css">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

  <style>
    @font-face {
      font-family: 'Futura Std Medium';
      src: url('/Muatan-Listrik/fonts/Futura Std Medium.ttf') format('opentype');
    }

    body {
      margin: 0;
      font-family: 'Futura Std Medium', sans-serif;
      color: #fff;
      background: linear-gradient(160deg, #000022 0%, #000000 100%);
    }

    header {
      background: #1c1c1c;
      color: #fff;

      padding: 20px 0 16px 10px;
      /* atas saja, kiri dan kanan diberi 0 */
      position: relative;

      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header::after {
      content: none;
    }

    header h1 {
      margin-bottom: 20px;
      padding-left: 20px;
      font-family: 'Futura Std Medium', sans-serif;
      color: #fcd361;
    }

    .header-right {
      flex-grow: 1;
      text-align: right;
    }

    .search-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-right: 20px;
    }

    .search-icon-wrapper {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: default;
      background: none;
      border: none;
      box-shadow: none;
    }

    .search-icon-wrapper svg {
      fill: #ffffff;
    }

    .search-input {
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid #ccc;
      outline: none;
      background: #ffffff;
      color: #000000;
      font-size: 14px;
    }

    .nav-left ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      background: #111133;
      display: flex;
      align-items: flex-end;
      width: 100%;
      height: 40px;
    }

    .nav-left ul li {
      flex-grow: 1;
    }

    .nav-left ul li a {
      color: #fff7d9;
      padding: 15px 20px;
      text-decoration: none;
      display: block;
      font-family: 'Futura Std Medium', sans-serif;

      background: #1c1c1c;
      /* warna kotak */
      color: #ffffff;

      transform: translateY(0);
      transition: transform 0.5s ease, background 0.5s ease, color 0.5s ease;

      border-bottom: 4px solid #fff7d9;

      /* diberi rounding tapi kaku */
      border-radius: 0 0 20px 20px;

      border-right: 1px solid #1c1c1c;

      text-align: center;
    }

    /* Menghilangkan garis di sebelah kanan terakhir */
    .nav-left ul li:last-child a {
      border-right: none;
    }

    .nav-left ul li a:hover {
      transform: translateY(10px);
      background: #1c1c1c;
      color: #fff7d9;
      border-bottom: 4px solid #fcd361;
      animation: glow-flicker 0.8s infinite;
    }

    /* Navbar yang aktif diberi garis bawah orange */
    .nav-left ul li a.active {
      background: #1c1c1c;
      color: #fff7d9;
      transform: translateY(10px);
      border-bottom: 4px solid #fcd361;
      animation: glow-flicker 0.8s infinite;
    }

    @keyframes glow-flicker {

      0%,
      100% {
        text-shadow: 0 0 10px orange, 0 0 20px orange, 0 0 30px orange;
      }

      50% {
        text-shadow: 0 0 2px orange, 0 0 5px orange, 0 0 10px orange;
      }
    }

    /* Animasi saat berganti halaman */
    body {
      animation: fadeIn 0.7s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    main {
      padding: 40px 0;
      /* hanya atas-bawah */
      font-family: 'Futura Std Medium', sans-serif;
      background: #000000;
      color: #ffffff;
      min-height: 600px;
      display: flex;
      justify-content: center;
    }

    .input-section {
      background: #222;
      padding: 20px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      color: #fff;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
      margin: 20px auto;
    }

    .input-section label {
      display: block;
      margin-top: 10px;
    }

    .input-section input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 8px;
      border: none;
      margin-bottom: 10px;
    }

    .input-section button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #fcd361;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    .output-section {
      background: #111;
      color: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 700px;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
      margin: 20px auto;
    }

    .output-section.hidden {
      display: none;
    }

    input,
    select {
      width: 100%;
      padding: 8px;
      margin: 6px 0 12px 0;
      border-radius: 6px;
      border: none;
      font-size: 14px;
      background: #fff;
    }

    .konten-tengah {
      width: 100%;
      max-width: 800px;
      text-align: center;
      padding: 30px;
      background-color: rgba(255, 255, 255, 0.02);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(252, 211, 97, 0.08);
    }

    .input-section,
    .output-section {
      margin: 20px auto;
      text-align: left;
    }

    .row-input {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }

    .row-input input {
      flex-grow: 1;
      min-width: 0;
    }

    .row-input select {
      width: 90px;
    }

    .judul-gaya {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .judul-gaya h2 {
      font-size: 36px;
      color: #fcd361;
      margin: 0;
    }

    .soal-section {
      background: none;
      padding: 20px;
      border-radius: 12px;
      margin: 20px auto;
      margin-left: 10px;
      max-width: 700px;
      color: #fff;
      box-shadow: none;
      text-align: left;
      position: relative;
    }

    .soal-section textarea {
      width: 103%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin-top: 10px;
      font-size: 15px;
      resize: vertical;
      background-color: #fff;
      color: #000;
    }

    .soal-section button {
      margin-top: 3px;
      padding: 10px 20px;
      background: #fcd361;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    .soal-section .unggah-toggle-wrapper {
      position: absolute;
      right: -20px;
      top: 150px;
      margin: 10px 0 0 0;
      max-width: 700px;
      display: flex;
      justify-content: flex-end;
      margin-top: 3px;
    }

    .soal-section button.unggah-toggle {
      all: unset;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 2px solid #fcd361;
      border-radius: 8px;
      padding: 6px 12px;
      background: transparent;
      color: #fcd361;
      cursor: pointer;
      font-family: 'Futura Std Medium', sans-serif;
      transition: all 0.3s ease;
    }

    .soal-section button.unggah-toggle svg {
      fill: currentColor;
      transition: transform 0.3s ease, fill 0.3s ease;
    }

    .soal-section button.unggah-toggle:hover {
      background: #fcd361;
      color: #000;
    }

    .soal-section button.unggah-toggle:hover svg {
      transform: translateY(-2px);
      fill: #000;
    }

    .unggah-box {
      margin-top: 10px;
      background: #1c1c1c;
      padding: 20px;
      border-radius: 12px;
      border: 1px dashed #fcd361;
      text-align: center;

      width: 100%;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }

    .upload-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      color: #fff;
    }

    .upload-area input[type="file"] {
      display: none;
    }

    .hidden {
      display: none;
    }

    .tab-selector {
      display: flex;
      gap: 5px;
      margin-bottom: -20px;
      margin-top: 20px;
      margin-left: auto;
      margin-right: auto;
      max-width: 400px;
      /* samakan dengan .input-section */
      padding-left: 0;
    }

    .tab-btn {
      background: transparent;
      color: #fcd361;
      padding: 10px 18px;
      border: none;
      border-radius: 10px 10px 0 0;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
      font-family: 'Futura Std Medium', sans-serif;
    }

    .tab-btn:hover {
      background-color: rgba(255, 255, 255, 0.05);
      color: #fff;
    }

    .tab-btn.active {
      background-color: #222;
      /* samakan dengan .input-section */
      color: #fff;
      border-bottom: 2px solid transparent;
    }

    .tab-content {
      display: none;
      background-color: #222;
      padding: 0;
      border-radius: 12px 0 12px 12px;
      box-shadow: 0 0 10px rgba(252, 211, 97, 0.08);
      margin-top: 0;
      max-width: 430px;
      margin-left: auto;
      margin-right: auto;
    }

    .tab-content.active {
      display: block;
    }

    .row-input {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      margin-bottom: 10px;
    }

    .row-input input {
      flex-grow: 1;
      min-width: 0;
      padding: 10px;
      height: 17px;
      border-radius: 8px;
      font-size: 14px;
    }

    .row-input .satuan-label {
      background: #eee;
      padding: 8px 14px;
      border: 1px solid #ccc;
      border-left: none;
      border-radius: 0 6px 6px 0;
    }

    .penjelasan-langkah {
      margin-top: 20px;
      background: #f3f3f3;
      padding: 16px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
    }
  </style>

</head>

<body>

  <header>
    <h1>Perhitungan Muatan Listrik</h1>

    <!-- Tambahkan container baru untuk search agar tidak mengganggu nav -->
    <div class="search-container">
      <div class="search-icon-wrapper" id="search-toggle">
        <!-- icon search -->
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24" width="20"
          fill="rgb(227, 227, 227)">
          <path d="M0 0h24v24H0z" fill="none" />
          <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5
              6.5 6.5 0 109.5 16c1.61 0 3.09-.59
              4.23-1.57l.27.28v.79l5 4.99
              L20.49 19l-4.99-5zm-6 0C8.01 14 6 11.99
              6 9.5S8.01 5 10.5 5 15 7.01 15 9.5
              12.99 14 10.5 14z" />
        </svg>
      </div>
      <input type="text" class="search-input" placeholder="Cari sesuatu…" />
    </div>
  </header>

  <!-- Navigasi dipisahkan dari header-right -->
  <nav class="nav-left">
    <ul>
      <li><a href="/Muatan-Listrik/index.html">Home</a></li>
      <li><a href="/Muatan-Listrik/materi/kuat-arus-listrik/kuat-arus-listrik.html">Kuat Arus Listrik</a>
      </li>
      <li><a href="/Muatan-Listrik/materi/gaya-coulomb/gaya-coulomb.html">Gaya Coulomb</a></li>
      <li><a href="/Muatan-Listrik/materi/muatan-listrik/muatan-listrik.html">Muatan Listrik</a></li>
      <li><a href="/Muatan-Listrik/materi/gaya-elektrostatis/gaya-elektrostatis.html" class="active">Gaya Elektrostatis</a>
      </li>
    </ul>
  </nav>

  <main>
    <div class="konten-tengah">
      <div class="judul-gaya">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="#fcd361">
          <path fill="none" d="M0 0h24v24H0z" />
          <path
            d="M12 4a8 8 0 0 1 8 8c0 1.849-.63 3.549-1.683 4.899l1.43 1.43a10 10 0 1 0-14.394 0l1.43-1.43A7.962 7.962 0 0 1 4 12a8 8 0 0 1 8-8zm0 2a6 6 0 0 0-6 6c0 1.481.535 2.839 1.422 3.899L12 13.414l4.578 2.485A5.98 5.98 0 0 0 18 12a6 6 0 0 0-6-6zm0 3a3 3 0 0 1 3 3c0 .617-.187 1.188-.507 1.663L12 11.828l-2.493 1.835A2.996 2.996 0 0 1 9 12a3 3 0 0 1 3-3z" />
        </svg>
        <h2>Gaya Elektrostatis</h2>
      </div>

      <p>Masukkan nilai berikut:</p>

      <!-- 🔘 Tombol Pilihan -->
      <div class="tab-selector">
        <button onclick="showTab('fa')" class="tab-btn active">Gaya FA</button>
        <button onclick="showTab('fb')" class="tab-btn">Gaya FB</button>
        <button onclick="showTab('fc')" class="tab-btn">Gaya FC</button>
      </div>

      <!-- Tab FA -->
      <div id="tab-fa" class="tab-content active">
        <div class="input-section">
          <div class="output-section hidden" id="output-fa">
            <h3>Hasil:</h3>
            <p id="hasil-fa"></p>
          </div>
          <label for="q1-fa">Muatan Q₁:</label>
          <div class="row-input">
            <input type="number" id="q1-fa" placeholder="Masukkan muatan Q₁">
            <select id="q1Unit-fa">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="q2-fa">Muatan Q₂:</label>
          <div class="row-input">
            <input type="number" id="q2-fa" placeholder="Masukkan muatan Q₂">
            <select id="q2Unit-fa">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="r-fa">Jarak r:</label>
          <div class="row-input">
            <input type="number" id="r-fa" placeholder="Masukkan jarak r">
            <select id="rUnit-fa">
              <option value="m">m</option>
              <option value="cm" selected>cm</option>
              <option value="mm">mm</option>
            </select>
          </div>

          <button onclick="hitungFA()">Hitung</button>
          <button onclick="clearFA()" style="margin-left: 10px; background-color: #999;">Clear</button>
        </div>
      </div>

      <!-- Tab FB -->
      <div id="tab-fb" class="tab-content">
        <div class="input-section">
          <div class="output-section hidden" id="output-fb">
            <h3>Hasil:</h3>
            <p id="hasil-fb"></p>
          </div>
          <label for="q1-fb">Muatan Q₁:</label>
          <div class="row-input">
            <input type="number" id="q1-fb" placeholder="Masukkan muatan Q₁">
            <select id="q1Unit-fb">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="q2-fb">Muatan Q₂:</label>
          <div class="row-input">
            <input type="number" id="q2-fb" placeholder="Masukkan muatan Q₂">
            <select id="q2Unit-fb">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="q3-fb">Muatan Q₃:</label>
          <div class="row-input">
            <input type="number" id="q3-fb" placeholder="Masukkan muatan Q₃">
            <select id="q3Unit-fb">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="rab-fb">Jarak AB:</label>
          <div class="row-input">
            <input type="number" id="rab-fb" placeholder="Masukkan jarak ab">
            <select id="rabUnit-fb">
              <option value="m">m</option>
              <option value="cm" selected>cm</option>
              <option value="mm">mm</option>
            </select>
          </div>

          <label for="rbc-fb">Jarak BC:</label>
          <div class="row-input">
            <input type="number" id="rbc-fb" placeholder="Masukkan jarak bc">
            <select id="rbcUnit-fb">
              <option value="m">m</option>
              <option value="cm" selected>cm</option>
              <option value="mm">mm</option>
            </select>
          </div>

          <button onclick="hitungFB()">Hitung</button>
          <button onclick="clearFB()" style="margin-left: 10px; background-color: #999;">Clear</button>
        </div>
      </div>

      <!-- Tab FC -->
      <div id="tab-fc" class="tab-content">
        <div class="input-section">
          <div class="output-section hidden" id="output-fc">
            <h3>Hasil:</h3>
            <p id="hasil-fc"></p>
          </div>
          <label for="qa-fc">Muatan Q₁:</label>
          <div class="row-input">
            <input type="number" id="qa-fc" placeholder="Masukkan muatan Q₁">
            <select id="qaUnit-fc">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="qb-fc">Muatan Q₂:</label>
          <div class="row-input">
            <input type="number" id="qb-fc" placeholder="Masukkan muatan Q₂">
            <select id="qbUnit-fc">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="qc-fc">Muatan Q₃:</label>
          <div class="row-input">
            <input type="number" id="qc-fc" placeholder="Masukkan muatan Q₃">
            <select id="qcUnit-fc">
              <option value="C">C</option>
              <option value="mC">mC</option>
              <option value="μC" selected>μC</option>
              <option value="nC">nC</option>
            </select>
          </div>

          <label for="rca-fc">Jarak CA:</label>
          <div class="row-input">
            <input type="number" id="rca-fc" placeholder="Masukkan jarak ca">
            <select id="rcaUnit-fc">
              <option value="m">m</option>
              <option value="cm" selected>cm</option>
              <option value="mm">mm</option>
            </select>
          </div>

          <label for="rcb-fc">Jarak CB:</label>
          <div class="row-input">
            <input type="number" id="rcb-fc" placeholder="Masukkan jarak cb">
            <select id="rcbUnit-fc">
              <option value="m">m</option>
              <option value="cm" selected>cm</option>
              <option value="mm">mm</option>
            </select>
          </div>

          <button onclick="hitungFC()">Hitung</button>
          <button onclick="clearFC()" style="margin-left: 10px; background-color: #999;">Clear</button>
        </div>
      </div>

      <div class="output-section hidden" id="langkah-fa-section">
        <h4>Cara Pengerjaan:</h4>
        <div id="langkah-fa"></div>
      </div>

      <div class="output-section hidden" id="langkah-fb-section">
        <h4>Cara Pengerjaan:</h4>
        <div id="langkah-fb"></div>
      </div>

      <div class="output-section hidden" id="langkah-fc-section">
        <h4>Cara Pengerjaan:</h4>
        <div id="langkah-fc"></div>
      </div>
    </div>
  </main>

  <script>
    function hitungFA() {
      const q1 = parseFloat(document.getElementById("q1-fa").value);
      const q1Unit = document.getElementById("q1Unit-fa").value;
      const q2 = parseFloat(document.getElementById("q2-fa").value);
      const q2Unit = document.getElementById("q2Unit-fa").value;
      const r = parseFloat(document.getElementById("r-fa").value);
      const rUnit = document.getElementById("rUnit-fa").value;

      const q1C = convertMuatan(q1, q1Unit);
      const q2C = convertMuatan(q2, q2Unit);
      const rMeter = convertJarak(r, rUnit);

      if (isNaN(q1) || isNaN(q2) || isNaN(r)) {
        alert("Semua nilai harus diisi!");
        return;
      }

      const F = k * Math.abs(q1C * q2C) / (rMeter * rMeter);

      function convertMuatan(nilai, satuan) {
        switch (satuan) {
          case "mC": return nilai * 1e-3;
          case "μC": return nilai * 1e-6;
          case "nC": return nilai * 1e-9;
          default: return nilai;
        }
      }

      function convertJarak(nilai, satuan) {
        switch (satuan) {
          case "cm": return nilai * 1e-2;
          case "mm": return nilai * 1e-3;
          default: return nilai;
        }
      }

      const langkah = `
  <p><strong>Diketahui:</strong></p>
  <div class="diketahui-list">
    <p>Q₁ = ${formatQIlmiah(q1, q1Unit)}</p>
    <p>Q₂ = ${formatQIlmiah(q2, q2Unit)}</p>
    <p>${formatJarakGabungan(r, rUnit, "r")}</p>
  </div>

  <p><strong>Rumus:</strong></p>
  \\[
  F_A = k \\cdot \\left( \\frac{q_1 \\cdot q_2}{r^2} \\right)
  \\]

  <p><strong>Perhitungan:</strong></p>
  \\[
  \\begin{aligned}
  F_A &= 9 \\times 10^9 \\cdot \\left( \\frac{${formatCerdas(q1C)} \\cdot ${formatCerdas(q2C)}}{(${formatCerdas(rMeter)})^2} \\right) \\\\[6pt]

      &= 9 \\times 10^9 \\cdot \\left( \\frac{${formatCerdas(q1C * q2C)}}{${formatCerdas(rMeter ** 2)}} \\right) \\\\[6pt]

      &= 9 \\times 10^9 \\cdot ${formatCerdas((q1C * q2C) / (rMeter ** 2))} \\\\[6pt]

      &= ${formatCerdas(F)}~\\text{N}
  \\end{aligned}
  \\]
`;

      document.getElementById("hasil-fa").innerHTML = `\\[ F = ${formatCerdas(F)}~\\text{N} \\]`;
      document.getElementById("output-fa").classList.remove("hidden");
      document.getElementById("langkah-fa-section").classList.remove("hidden");
      document.getElementById("langkah-fa").innerHTML = langkah;
      if (window.MathJax) MathJax.typesetPromise();
    }

    function hitungFB() {
      const q1 = parseFloat(document.getElementById("q1-fb").value);
      const q2 = parseFloat(document.getElementById("q2-fb").value);
      const q3 = parseFloat(document.getElementById("q3-fb").value);
      const rAB = parseFloat(document.getElementById("rab-fb").value);
      const rBC = parseFloat(document.getElementById("rbc-fb").value);

      const q1Unit = document.getElementById("q1Unit-fb").value;
      const q2Unit = document.getElementById("q2Unit-fb").value;
      const q3Unit = document.getElementById("q3Unit-fb").value;
      const rabUnit = document.getElementById("rabUnit-fb").value;
      const rbcUnit = document.getElementById("rbcUnit-fb").value;

      if ([q1, q2, q3, rAB, rBC].some(isNaN)) {
        alert("Semua nilai harus diisi!");
        return;
      }

      const q1C = convertMuatan(q1, q1Unit);
      const q2C = convertMuatan(q2, q2Unit);
      const q3C = convertMuatan(q3, q3Unit);
      const rABm = convertJarak(rAB, rabUnit);
      const rBCm = convertJarak(rBC, rbcUnit);

      const F1 = k * q1C * q3C / (rABm ** 2);
      const F2 = k * q2C * q3C / (rBCm ** 2);
      const FB = F1 - F2;

      const langkah = `
  <p><strong>Diketahui:</strong></p>
  <div class="diketahui-list">
    <p>Q₁ = ${formatQIlmiah(q1, q1Unit)}</p>
    <p>Q₂ = ${formatQIlmiah(q2, q2Unit)}</p>
    <p>Q₃ = ${formatQIlmiah(q3, q3Unit)}</p>
    <p>${formatJarakGabungan(rAB, rabUnit, "AB")}</p>
    <p>${formatJarakGabungan(rBC, rbcUnit, "BC")}</p>
  </div>

  <p><strong>Rumus:</strong></p>
  \\[
  F_B = \\frac{k q_1 q_3}{r_{AB}^2} - \\frac{k q_2 q_3}{r_{BC}^2}
  \\]

  <p><strong>Perhitungan:</strong></p>
  \\[
  \\begin{aligned}
  F_B &= 9 \\times 10^9 \\left(
  \\frac{${formatCerdas(q2C)} \\cdot ${formatCerdas(q3C)}}{(${formatCerdas(rBCm)})^2}
  \\right)
  - 9 \\times 10^9 \\left(
  \\frac{${formatCerdas(q1C)} \\cdot ${formatCerdas(q3C)}}{(${formatCerdas(rABm)})^2}
  \\right) \\\\[6pt]

  &= 9 \\times 10^9 \\left(
  \\frac{${formatCerdas(q2C * q3C)}}{${formatCerdas(rBCm ** 2)}}
  \\right)
  - 9 \\times 10^9 \\left(
  \\frac{${formatCerdas(q1C * q3C)}}{${formatCerdas(rABm ** 2)}}
  \\right) \\\\[6pt]

  &= 9 \\times 10^9 (${formatCerdas(F2)} - ${formatCerdas(F1)}) \\\\[6pt]

  &= 9 \\times 10^9 (${formatCerdas(F2 - F1)}) \\\\[6pt]

  &= ${formatCerdas(FB)}~\\text{N}
  \\end{aligned}
  \\]
`;

      document.getElementById("hasil-fb").innerHTML = `\\[ F_B = ${formatCerdas(FB)}~\\text{N} \\]`;
      document.getElementById("langkah-fb").innerHTML = langkah;
      document.getElementById("output-fb").classList.remove("hidden");
      document.getElementById("langkah-fb-section").classList.remove("hidden");
      if (window.MathJax) MathJax.typesetPromise();
    }

    function hitungFC() {
      const qa = parseFloat(document.getElementById("qa-fc").value);
      const qb = parseFloat(document.getElementById("qb-fc").value);
      const qc = parseFloat(document.getElementById("qc-fc").value);
      const rca = parseFloat(document.getElementById("rca-fc").value);
      const rcb = parseFloat(document.getElementById("rcb-fc").value);

      const qaUnit = document.getElementById("qaUnit-fc").value;
      const qbUnit = document.getElementById("qbUnit-fc").value;
      const qcUnit = document.getElementById("qcUnit-fc").value;
      const rcaUnit = document.getElementById("rcaUnit-fc").value;
      const rcbUnit = document.getElementById("rcbUnit-fc").value;

      if ([qa, qb, qc, rca, rcb].some(isNaN)) {
        alert("Semua nilai harus diisi!");
        return;
      }

      const qaC = convertMuatan(qa, qaUnit);
      const qbC = convertMuatan(qb, qbUnit);
      const qcC = convertMuatan(qc, qcUnit);
      const rcaM = convertJarak(rca, rcaUnit);
      const rcbM = convertJarak(rcb, rcbUnit);

      const tanpaK_Fca = qcC * qaC / (rcaM ** 2);
      const tanpaK_Fcb = qcC * qbC / (rcbM ** 2);
      const Fca = k * tanpaK_Fca;
      const Fcb = k * tanpaK_Fcb;
      const Fc = Fca + Fcb;

      const langkah = `
  <p><strong>Diketahui:</strong></p>
  <div class="diketahui-list">
    <p>Q<sub>A</sub> = ${formatQIlmiah(qa, qaUnit)}</p>
    <p>Q<sub>B</sub> = ${formatQIlmiah(qb, qbUnit)}</p>
    <p>Q<sub>C</sub> = ${formatQIlmiah(qc, qcUnit)}</p>
    <p>${formatJarakGabungan(rca, rcaUnit, "r<sub>CA</sub>")}</p>
    <p>${formatJarakGabungan(rcb, rcbUnit, "r<sub>CB</sub>")}</p>
  </div>

  <p><strong>Rumus:</strong></p>
  \\[
  F_C = F_{CA} + F_{CB}
  \\]
  \\[
  F_C = k \\left(
    \\frac{q_C q_A}{r_{CA}^2} + \\frac{q_C q_B}{r_{CB}^2}
  \\right)
  \\]

  <p><strong>Perhitungan:</strong></p>
  \\[
  \\begin{aligned}
  F_C &= 9 \\times 10^9 \\left(
  \\frac{(${formatCerdas(qcC)} \\cdot ${formatCerdas(qaC)})}{(${formatCerdas(rcaM)})^2}
  + \\frac{(${formatCerdas(qcC)} \\cdot ${formatCerdas(qbC)})}{(${formatCerdas(rcbM)})^2}
  \\right) \\\\[6pt]

  &= 9 \\times 10^9 \\left(
  \\frac{${formatCerdas(qcC * qaC)}}{${formatCerdas(rcaM ** 2)}}
  + \\frac{${formatCerdas(qcC * qbC)}}{${formatCerdas(rcbM ** 2)}}
  \\right) \\\\[6pt]

  &= 9 \\times 10^9 (${gabungTambahKurang(formatCerdas(tanpaK_Fca), formatCerdas(tanpaK_Fcb))}) \\\\[6pt]

  &= 9 \\times 10^9 (${formatCerdas(tanpaK_Fca + tanpaK_Fcb)}) \\\\[6pt]

  &= ${formatCerdas(Fc)}~\\text{N}
  \\end{aligned}
  \\]
`;

      document.getElementById("hasil-fc").innerHTML = `\\[ F_C = ${formatCerdas(Fc)}~\\text{N} \\]`;
      document.getElementById("langkah-fc").innerHTML = langkah;
      document.getElementById("output-fc").classList.remove("hidden");
      document.getElementById("langkah-fc-section").classList.remove("hidden");
      if (window.MathJax) MathJax.typesetPromise();
    }

    function clearFA() {
      ["q1-fa", "q2-fa", "r-fa"].forEach(id => {
        document.getElementById(id).value = "";
      });

      document.getElementById("output-fa").classList.add("hidden");
      document.getElementById("langkah-fa-section").classList.add("hidden");

      document.getElementById("hasil-fa").innerHTML = "";
      document.getElementById("langkah-fa").innerHTML = "";
    }

    function clearFB() {
      ["q1-fb", "q2-fb", "q3-fb", "rab-fb", "rbc-fb"].forEach(id => document.getElementById(id).value = "");
      document.getElementById("output-fb").classList.add("hidden");
      document.getElementById("langkah-fb-section").classList.add("hidden");
      document.getElementById("hasil-fb").innerHTML = "";
      document.getElementById("langkah-fb").innerHTML = "";
    }

    function clearFC() {
      ["qa-fc", "qb-fc", "qc-fc", "rca-fc", "rcb-fc"].forEach(id => document.getElementById(id).value = "");
      document.getElementById("output-fc").classList.add("hidden");
      document.getElementById("langkah-fc-section").classList.add("hidden");
      document.getElementById("hasil-fc").innerHTML = "";
      document.getElementById("langkah-fc").innerHTML = "";
    }
  </script>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <script>
    function showTab(id) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

      document.getElementById("tab-" + id).classList.add('active');
      event.currentTarget.classList.add('active');

      // Sembunyikan semua langkah pengerjaan
      document.getElementById("langkah-kuat-arus-section")?.classList.add("hidden");
      document.getElementById("langkah-muatan-section")?.classList.add("hidden");
      document.getElementById("langkah-waktu-section")?.classList.add("hidden");
    }

    const k = 9e9;

    function convertMuatan(nilai, satuan) {
      switch (satuan) {
        case "mC": return nilai * 1e-3;
        case "μC": return nilai * 1e-6;
        case "nC": return nilai * 1e-9;
        default: return nilai;
      }
    }

    function convertJarak(nilai, satuan) {
      switch (satuan) {
        case "cm": return nilai * 1e-2;
        case "mm": return nilai * 1e-3;
        default: return nilai;
      }
    }

    function gabungTambahKurang(a, b) {
      if (b.trim().startsWith("-")) {
        return `${a} - ${b.trim().substring(1)}`;
      } else {
        return `${a} + ${b}`;
      }
    }

    function formatQIlmiah(nilai, satuan) {
      if (satuan === "C") {
        return `${formatCerdas(nilai)} C`;
      }

      const konversi = convertMuatan(nilai, satuan); // hasil dalam C
      return `${formatCerdas(nilai)} ${satuan} = ${formatCerdas(konversi)} C`;
    }

    function formatJarakIlmiah(nilai, satuan) {
      if (satuan === "m") {
        return `${formatCerdas(nilai)} m`;
      }

      const faktor = {
        "cm": "× 10⁻²",
        "mm": "× 10⁻³"
      }[satuan];

      const konversi = convertJarak(nilai, satuan); // hasil dalam meter
      return `${formatCerdas(nilai)} ${faktor} m = ${formatCerdas(konversi)} m`;
    }

    function formatJarakGabungan(nilai, satuan, label) {
      if (satuan === "m") {
        return `${label} = ${formatCerdas(nilai)} m`;
      }
      const konversi = convertJarak(nilai, satuan);
      return `${label} = ${formatCerdas(nilai)} ${satuan} = ${formatCerdas(konversi)} m`;
    }

    function formatCerdas(angka) {
      const abs = Math.abs(angka);
      if (abs >= 1) {
        return Number.isInteger(angka) ? angka.toString() : parseFloat(angka.toFixed(3)).toString();
      } else if (abs >= 0.01) {
        return parseFloat(angka.toFixed(4)).toString();
      } else {
        const str = angka.toExponential(2);
        const [mantissa, exp] = str.split('e');
        return `${parseFloat(mantissa)} × 10${superscript(parseInt(exp))}`;
      }
    }
    
    function superscript(exp) {
      const supers = { "-": "⁻", "0": "⁰", "1": "¹", "2": "²", "3": "³", "4": "⁴", "5": "⁵", "6": "⁶", "7": "⁷", "8": "⁸", "9": "⁹" };
      return exp.toString().split('').map(c => supers[c] || '').join('');
    }
  </script>

</body>

</html>
